{% extends 'base.html' %}
{% load static %}

{% block title %}Create Account | SinoPharmacie{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/home.css' %}?v=2.0">
{% endblock %}

{% block content %}
<div class="auth-page-container">
    <div class="auth-card">
        <!-- Left Side Illustration -->
        <div class="auth-illustration">
             <img src="https://cdn-icons-png.flaticon.com/512/3063/3063822.png" alt="Register Illustration">
        </div>

        <!-- Right Side Form -->
        <div class="auth-form-container">
            <div class="auth-header">
                <a href="{% url 'home' %}" class="logo">Sino<span>Pharmacie</span></a>
                <p>Join us for a healthier life.</p>
            </div>

            <form method="post" class="auth-form">
                {% csrf_token %}
                
                <!-- We render form fields manually to match design, mapping to the Django form -->
                <div style="display: flex; gap: 1rem;">
                    <div class="form-group" style="flex: 1;">
                        <label for="{{ form.first_name.id_for_label }}">First Name</label>
                        {{ form.first_name }}
                        {{ form.first_name.errors }}
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label for="{{ form.last_name.id_for_label }}">Last Name</label>
                        {{ form.last_name }}
                        {{ form.last_name.errors }}
                    </div>
                </div>

                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}">Email Address</label>
                    {{ form.email }}
                    {{ form.email.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">Username</label>
                    <input type="text" name="username" id="id_username" class="form-input" placeholder="Choose a username" required>
                    {{ form.username.errors }}
                </div>

                <!-- Phone number omitted for now as it requires model changes -->

                <div class="form-group">
                    <label for="id_password1">Password</label>
                    <div class="password-group">
                        <input type="password" name="password1" id="id_password1" placeholder="Create a password" required>
                        <i class="fas fa-eye toggle-password" onclick="togglePassword('id_password1')"></i>
                    </div>
                    {% if form.password1.help_text %}
                    <small style="color: var(--text-light); font-size: 0.75rem;">{{ form.password1.help_text }}</small>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_password2">Confirm Password</label>
                    <div class="password-group">
                        <input type="password" name="password2" id="id_password2" placeholder="Confirm password" required>
                    </div>
                </div>

                <div class="form-group terms-check">
                    <input type="checkbox" id="terms" required>
                    <label for="terms" style="margin:0; font-weight: normal;">I agree to the <a href="#" style="color: var(--primary-color);">Terms & Conditions</a></label>
                </div>

                <button type="submit" class="btn btn-primary btn-block">Create Account</button>
            </form>

            <div class="auth-footer">
                Already have an account? <a href="{% url 'login' %}">Login</a>
            </div>
        </div>
    </div>
</div>

<script>
    function togglePassword(fieldId) {
        const passwordInput = document.getElementById(fieldId);
        const icon = passwordInput.nextElementSibling;
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }
</script>
{% endblock %}
